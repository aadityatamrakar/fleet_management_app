"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="lbServices"),function(window,angular,undefined){"use strict";var urlBase="/api",authHeader="authorization";function getHost(url){var m=url.match(/^(?:https?:)?\/\/([^\/]+)/);return m?m[1]:null}var urlBaseHost=getHost(urlBase)?urlBase:location.host,module=angular.module("lbServices",["ngResource"]);module.factory("User",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/Users/:id",{id:"@id"},{prototype$__findById__accessTokens:{params:{fk:"@fk"},url:urlBase+"/Users/:id/accessTokens/:fk",method:"GET"},prototype$__destroyById__accessTokens:{params:{fk:"@fk"},url:urlBase+"/Users/:id/accessTokens/:fk",method:"DELETE"},prototype$__updateById__accessTokens:{params:{fk:"@fk"},url:urlBase+"/Users/:id/accessTokens/:fk",method:"PUT"},prototype$__get__accessTokens:{isArray:!0,url:urlBase+"/Users/:id/accessTokens",method:"GET"},prototype$__create__accessTokens:{url:urlBase+"/Users/:id/accessTokens",method:"POST"},prototype$__delete__accessTokens:{url:urlBase+"/Users/:id/accessTokens",method:"DELETE"},prototype$__count__accessTokens:{url:urlBase+"/Users/:id/accessTokens/count",method:"GET"},create:{url:urlBase+"/Users",method:"POST"},createMany:{isArray:!0,url:urlBase+"/Users",method:"POST"},patchOrCreate:{url:urlBase+"/Users",method:"PATCH"},replaceOrCreate:{url:urlBase+"/Users/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/Users/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/Users/:id/exists",method:"GET"},findById:{url:urlBase+"/Users/:id",method:"GET"},replaceById:{url:urlBase+"/Users/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/Users",method:"GET"},findOne:{url:urlBase+"/Users/findOne",method:"GET"},updateAll:{url:urlBase+"/Users/update",method:"POST"},deleteById:{url:urlBase+"/Users/:id",method:"DELETE"},count:{url:urlBase+"/Users/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/Users/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/Users/change-stream",method:"POST"},login:{params:{include:"user"},interceptor:{response:function(response){var accessToken=response.data;return LoopBackAuth.setUser(accessToken.id,accessToken.userId,accessToken.user),LoopBackAuth.rememberMe=!1!==response.config.params.rememberMe,LoopBackAuth.save(),response.resource}},url:urlBase+"/Users/login",method:"POST"},logout:{interceptor:{response:function(response){return LoopBackAuth.clearUser(),LoopBackAuth.clearStorage(),response.resource},responseError:function(responseError){return LoopBackAuth.clearUser(),LoopBackAuth.clearStorage(),responseError.resource}},url:urlBase+"/Users/logout",method:"POST"},prototype$verify:{url:urlBase+"/Users/:id/verify",method:"POST"},confirm:{url:urlBase+"/Users/confirm",method:"GET"},resetPassword:{url:urlBase+"/Users/reset",method:"POST"},changePassword:{url:urlBase+"/Users/change-password",method:"POST"},setPassword:{url:urlBase+"/Users/reset-password",method:"POST"},getCurrent:{url:urlBase+"/Users/:id",method:"GET",params:{id:function(){var id=LoopBackAuth.currentUserId;return null==id&&(id="__anonymous__"),id}},interceptor:{response:function(response){return LoopBackAuth.currentUserData=response.data,response.resource},responseError:function(responseError){return LoopBackAuth.clearUser(),LoopBackAuth.clearStorage(),$q.reject(responseError)}},__isGetCurrentUser__:!0}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.getCachedCurrent=function(){var data=LoopBackAuth.currentUserData;return data?new R(data):null},R.isAuthenticated=function(){return null!=this.getCurrentId()},R.getCurrentId=function(){return LoopBackAuth.currentUserId},R.modelName="User",R}]),module.factory("Todo",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/Todos/:id",{id:"@id"},{create:{url:urlBase+"/Todos",method:"POST"},createMany:{isArray:!0,url:urlBase+"/Todos",method:"POST"},patchOrCreate:{url:urlBase+"/Todos",method:"PATCH"},replaceOrCreate:{url:urlBase+"/Todos/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/Todos/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/Todos/:id/exists",method:"GET"},findById:{url:urlBase+"/Todos/:id",method:"GET"},replaceById:{url:urlBase+"/Todos/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/Todos",method:"GET"},findOne:{url:urlBase+"/Todos/findOne",method:"GET"},updateAll:{url:urlBase+"/Todos/update",method:"POST"},deleteById:{url:urlBase+"/Todos/:id",method:"DELETE"},count:{url:urlBase+"/Todos/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/Todos/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/Todos/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Todo",R}]),module.factory("Party",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/parties/:id",{id:"@id"},{create:{url:urlBase+"/parties",method:"POST"},createMany:{isArray:!0,url:urlBase+"/parties",method:"POST"},patchOrCreate:{url:urlBase+"/parties",method:"PATCH"},replaceOrCreate:{url:urlBase+"/parties/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/parties/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/parties/:id/exists",method:"GET"},findById:{url:urlBase+"/parties/:id",method:"GET"},replaceById:{url:urlBase+"/parties/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/parties",method:"GET"},findOne:{url:urlBase+"/parties/findOne",method:"GET"},updateAll:{url:urlBase+"/parties/update",method:"POST"},deleteById:{url:urlBase+"/parties/:id",method:"DELETE"},count:{url:urlBase+"/parties/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/parties/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/parties/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Party",R}]),module.factory("Bank",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/banks/:id",{id:"@id"},{create:{url:urlBase+"/banks",method:"POST"},createMany:{isArray:!0,url:urlBase+"/banks",method:"POST"},patchOrCreate:{url:urlBase+"/banks",method:"PATCH"},replaceOrCreate:{url:urlBase+"/banks/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/banks/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/banks/:id/exists",method:"GET"},findById:{url:urlBase+"/banks/:id",method:"GET"},replaceById:{url:urlBase+"/banks/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/banks",method:"GET"},findOne:{url:urlBase+"/banks/findOne",method:"GET"},updateAll:{url:urlBase+"/banks/update",method:"POST"},deleteById:{url:urlBase+"/banks/:id",method:"DELETE"},count:{url:urlBase+"/banks/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/banks/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/banks/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Bank",R}]),module.factory("Vehicle",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/vehicles/:id",{id:"@id"},{create:{url:urlBase+"/vehicles",method:"POST"},createMany:{isArray:!0,url:urlBase+"/vehicles",method:"POST"},patchOrCreate:{url:urlBase+"/vehicles",method:"PATCH"},replaceOrCreate:{url:urlBase+"/vehicles/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/vehicles/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/vehicles/:id/exists",method:"GET"},findById:{url:urlBase+"/vehicles/:id",method:"GET"},replaceById:{url:urlBase+"/vehicles/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/vehicles",method:"GET"},findOne:{url:urlBase+"/vehicles/findOne",method:"GET"},updateAll:{url:urlBase+"/vehicles/update",method:"POST"},deleteById:{url:urlBase+"/vehicles/:id",method:"DELETE"},count:{url:urlBase+"/vehicles/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/vehicles/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/vehicles/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Vehicle",R}]),module.factory("Setting",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/settings/:id",{id:"@id"},{create:{url:urlBase+"/settings",method:"POST"},createMany:{isArray:!0,url:urlBase+"/settings",method:"POST"},patchOrCreate:{url:urlBase+"/settings",method:"PATCH"},replaceOrCreate:{url:urlBase+"/settings/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/settings/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/settings/:id/exists",method:"GET"},findById:{url:urlBase+"/settings/:id",method:"GET"},replaceById:{url:urlBase+"/settings/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/settings",method:"GET"},findOne:{url:urlBase+"/settings/findOne",method:"GET"},updateAll:{url:urlBase+"/settings/update",method:"POST"},deleteById:{url:urlBase+"/settings/:id",method:"DELETE"},count:{url:urlBase+"/settings/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/settings/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/settings/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Setting",R}]),module.factory("Material",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/materials/:id",{id:"@id"},{create:{url:urlBase+"/materials",method:"POST"},createMany:{isArray:!0,url:urlBase+"/materials",method:"POST"},patchOrCreate:{url:urlBase+"/materials",method:"PATCH"},replaceOrCreate:{url:urlBase+"/materials/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/materials/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/materials/:id/exists",method:"GET"},findById:{url:urlBase+"/materials/:id",method:"GET"},replaceById:{url:urlBase+"/materials/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/materials",method:"GET"},findOne:{url:urlBase+"/materials/findOne",method:"GET"},updateAll:{url:urlBase+"/materials/update",method:"POST"},deleteById:{url:urlBase+"/materials/:id",method:"DELETE"},count:{url:urlBase+"/materials/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/materials/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/materials/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Material",R}]),module.factory("Company",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/companies/:id",{id:"@id"},{create:{url:urlBase+"/companies",method:"POST"},createMany:{isArray:!0,url:urlBase+"/companies",method:"POST"},patchOrCreate:{url:urlBase+"/companies",method:"PATCH"},replaceOrCreate:{url:urlBase+"/companies/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/companies/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/companies/:id/exists",method:"GET"},findById:{url:urlBase+"/companies/:id",method:"GET"},replaceById:{url:urlBase+"/companies/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/companies",method:"GET"},findOne:{url:urlBase+"/companies/findOne",method:"GET"},updateAll:{url:urlBase+"/companies/update",method:"POST"},deleteById:{url:urlBase+"/companies/:id",method:"DELETE"},count:{url:urlBase+"/companies/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/companies/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/companies/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Company",R}]),module.factory("Voucher",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/vouchers/:id",{id:"@id"},{create:{url:urlBase+"/vouchers",method:"POST"},createMany:{isArray:!0,url:urlBase+"/vouchers",method:"POST"},patchOrCreate:{url:urlBase+"/vouchers",method:"PATCH"},replaceOrCreate:{url:urlBase+"/vouchers/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/vouchers/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/vouchers/:id/exists",method:"GET"},findById:{url:urlBase+"/vouchers/:id",method:"GET"},replaceById:{url:urlBase+"/vouchers/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/vouchers",method:"GET"},findOne:{url:urlBase+"/vouchers/findOne",method:"GET"},updateAll:{url:urlBase+"/vouchers/update",method:"POST"},deleteById:{url:urlBase+"/vouchers/:id",method:"DELETE"},count:{url:urlBase+"/vouchers/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/vouchers/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/vouchers/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Voucher",R}]),module.factory("Builty",["LoopBackResource","LoopBackAuth","$injector","$q",function(LoopBackResource,LoopBackAuth,$injector,$q){var R=LoopBackResource(urlBase+"/builties/:id",{id:"@id"},{create:{url:urlBase+"/builties",method:"POST"},createMany:{isArray:!0,url:urlBase+"/builties",method:"POST"},patchOrCreate:{url:urlBase+"/builties",method:"PATCH"},replaceOrCreate:{url:urlBase+"/builties/replaceOrCreate",method:"POST"},upsertWithWhere:{url:urlBase+"/builties/upsertWithWhere",method:"POST"},exists:{url:urlBase+"/builties/:id/exists",method:"GET"},findById:{url:urlBase+"/builties/:id",method:"GET"},replaceById:{url:urlBase+"/builties/:id/replace",method:"POST"},find:{isArray:!0,url:urlBase+"/builties",method:"GET"},findOne:{url:urlBase+"/builties/findOne",method:"GET"},updateAll:{url:urlBase+"/builties/update",method:"POST"},deleteById:{url:urlBase+"/builties/:id",method:"DELETE"},count:{url:urlBase+"/builties/count",method:"GET"},prototype$patchAttributes:{url:urlBase+"/builties/:id",method:"PATCH"},createChangeStream:{url:urlBase+"/builties/change-stream",method:"POST"}});return R.upsert=R.patchOrCreate,R.updateOrCreate=R.patchOrCreate,R.patchOrCreateWithWhere=R.upsertWithWhere,R.update=R.updateAll,R.destroyById=R.deleteById,R.removeById=R.deleteById,R.prototype$updateAttributes=R.prototype$patchAttributes,R.modelName="Builty",R}]),module.factory("LoopBackAuth",function(){var props=["accessTokenId","currentUserId","rememberMe"],propsPrefix="$LoopBack$";function LoopBackAuth(){var self=this;props.forEach(function(name){self[name]=function(name){var key=propsPrefix+name;return localStorage[key]||sessionStorage[key]||null}(name)}),this.currentUserData=null}return LoopBackAuth.prototype.save=function(){var self=this,storage=this.rememberMe?localStorage:sessionStorage;props.forEach(function(name){save(storage,name,self[name])})},LoopBackAuth.prototype.setUser=function(accessTokenId,userId,userData){this.accessTokenId=accessTokenId,this.currentUserId=userId,this.currentUserData=userData},LoopBackAuth.prototype.clearUser=function(){this.accessTokenId=null,this.currentUserId=null,this.currentUserData=null},LoopBackAuth.prototype.clearStorage=function(){props.forEach(function(name){save(sessionStorage,name,null),save(localStorage,name,null)})},new LoopBackAuth;function save(storage,name,value){try{null==value&&(value=""),storage[propsPrefix+name]=value}catch(err){console.log("Cannot access local/session storage:",err)}}}).config(["$httpProvider",function($httpProvider){$httpProvider.interceptors.push("LoopBackAuthRequestInterceptor")}]).factory("LoopBackAuthRequestInterceptor",["$q","LoopBackAuth",function($q,LoopBackAuth){return{request:function(config){if(getHost(config.url)&&-1===config.url.indexOf(urlBaseHost))return config;if(LoopBackAuth.accessTokenId)config.headers[authHeader]=LoopBackAuth.accessTokenId;else if(config.__isGetCurrentUser__){var res={body:{error:{status:401}},status:401,config:config,headers:function(){}};return $q.reject(res)}return config||$q.when(config)}}}]).provider("LoopBackResource",function(){this.setAuthHeader=function(header){authHeader=header},this.getAuthHeader=function(){return authHeader},this.setUrlBase=function(url){urlBaseHost=getHost(urlBase=url)||location.host},this.getUrlBase=function(){return urlBase},this.$get=["$resource",function($resource){var LoopBackResource=function(url,params,actions){var resource=$resource(url,params,actions);return resource.prototype.$save=function(success,error){var result=resource.upsert.call(this,{},this,success,error);return result.$promise||result},resource};return LoopBackResource.getUrlBase=function(){return urlBase},LoopBackResource.getAuthHeader=function(){return authHeader},LoopBackResource}]})}(window,window.angular);